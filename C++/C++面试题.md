### 为什么构造函数不能是虚函数，而析构函数建议写成虚函数？

**构造函数不能是虚函数：**

1. 从存储空间角度分析

   虚函数是通过虚函数表实现的。虚函数表存储在对象的内存空间。如果构造函数为虚，那么就需要用虚函数表来调用。但是此时对象还没有实例化，无法找到虚函数表。

2. 从使用角度分析

   虚函数的作用在于通过父类的指针或者引用来调用它的时候能够变成调用子类的那个成员函数。而构造函数是在创建对象时自动调用的，不可能通过父类的指针或者引用去调用，因此也就规定构造函数不能是虚函数。同时创建一个对象总是要明确指定对象的类型。

**析构函数往往写成虚函数**

​		用基类类型指针绑定派生类实例，析构的时候，如果基类析构函数不是虚函数，则只会析构基类，不会析构派生类对象，从而造成内存泄漏。因此，在有动态分配堆上内存的时候，析构函数必须是虚函数，但是没有必要是纯虚函数。

### 虚函数表的原理

1. C++编译器保证虚函数表的指针存在于对象实例的最前面。因此，通过对象实例的地址，可以寻址到虚函数表，然后可以遍历其中的函数指针，调用相应的函数。
2. 在继承时，虚函数按照声明顺序放在表中；父类的虚函数在子类的虚函数前面。如果子类有虚函数重载了父类的虚函数，那么覆盖的函数将放在虚函数表中原来的父类虚函数的位置。
3. 如果是多重继承，每个父类都有自己的虚函数表。子类的成员函数被放在第一个父类的表中。这是为了解决不同的父类类型的指针指向同一个子类实例，而能够调用到实际的函数。如果子类覆盖了父类函数，那么会在多个虚函数表中都覆盖。

### 简述几个定义

**虚函数：**

虚函数的作用是允许在派生类中重新定义与基类同名的函数，并且可以通过基类的指针或引用来访问基类或者派生类的同名函数。

**重载：**

名字相同，但参数个数或类型不同；命名变得简单。编译器决定应该调用哪个函数

```c++
int MAX(double f1, double f2){}
int MAX(int n1, int n2){}
int MAX(int n1, int n2, int n3){}
```

**缺省参数：**

缺省参数：最右边连续若干个参数有缺省值;优势在于提高程序可扩充性。

如果某个写好的函数要添加新的参数，原来那些调用函数的语句，未必需要用新的参数，那么可以避免对原来那些函数调用语句的修改。

**面向对象的程序设计的四个特点：**

抽象、封装、继承、多态

### 虚函数和纯虚函数的区别

- 定义一个函数为虚函数，不代表它没有被实现；定义它为虚函数是为了允许用基类的指针来调用子类的整个函数。
- 定义一个函数为纯虚函数，代表这个函数没有被实现。是为了实现一个接口，起到规范的作用，规范继承这个类的程序员必须实现这个函数。含有纯虚函数的类称为抽象类，不能生成对象。派生类中必须重新声明函数。

### 复制构造函数起作用的三种情况：

1. 用一个对象初始化另一个对象

   ```c++
   Complex c2 = c1; //注意这是初始化，不是赋值。是c2的定义
   ```

2. 某函数的参数之一是A的对象，在函数调用时，类A的复制构造函数被调用

3. 如果返回值是类A的对象，那么函数返回时，A的复制构造函数被调用

